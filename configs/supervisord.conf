[supervisord]
nodaemon=true
user=root
pidfile=/tmp/supervisord.pid

[program:llama-server]
command=/usr/local/bin/llama-server -m /models/model.gguf -c 2048 --host 0.0.0.0 --port 8084 --slots --verbose
directory=/models
user=llama
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=1
startsecs=10

[program:metrics-exporter]
command=python3 /app/metrics/exporter.py
directory=/app/metrics
user=llama
autostart=true
autorestart=true
stdout_logfile=/dev/stdout
stdout_logfile_maxbytes=0
stderr_logfile=/dev/stderr
stderr_logfile_maxbytes=0
priority=2
startsecs=15